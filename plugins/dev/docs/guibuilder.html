<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>IVC GUI Builder - IVC Developer Guide</title>		
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<link href="ivcdocstyle.css" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<p class="backtotoc"><a href="main.html#TOC" class="backtotoc">[Back To TOC]</a></p>
		
		<p><span class="section_heading">IVC GUI Builder Tutorial</span><br />
		<span class="metainfo">Author: <a href="mailto:bh2@NOSPAMbh2.net">Bruce Herr</a><br />
		Last Modified: September 8, 2005</span>
		</p>

		<p class="subsection_heading">Summary</p>
		<p class="body_text">In this section you will be learning how to use the GUI Builder
		to create dynamic GUI's using Parameters</p>
		
		<p class="subsection_heading">Overview</p>
		<p class="body_text"> The IVC Core provides a cross-platform, cross-implementation GUI 
			Builder. GUI's are built by the GUI Builder through the use of 
			Parameters that describe what kind of input is needed. These are
			added to the GUI and depending on the Builder in use by the System,
			will create an interface through which the user can input data for 
			Algorithms and such. In addition to basic validation of input, 
			Validators and methods on the Parameter object itself can be used 
			to create a more rich environment with more fine-grained 
			validation of data, enabling and disabling, and programmatically 
			changing of field values.
		</p>
		<p class="body_text"> The Core GUI plugin provides the same method of Parameter-based GUI
		 	auto-creation in order to create SWT GUIs and SWT Components which 
		 	can be imbedded into other SWT Components.
		</p>

		<p class="subsection_heading">Classes involved in GUI creation</p>
		<p class="body_text"> <a href="api/edu/iu/iv/common/guibuilder/GUIBuilder.html" class="apiref"><code>edu.iu.iv.common.guibuilder.GUIBuilder</code></a> - This class has several 
			static methods for creating GUIs. The most basic one is 
			GUIBuilder.createGUI("title","message"); This creates a blank GUI
			with no inputs. You must then add Parameters to this to add inputs.
			There are two other createGUI. 
			createGUI("title","message",parameterMap); asks for a ParameterMap 
			which holds all the parameters you wish to use and is added to the 
			GUI automatically. createGUI("title","message",parameterizable); asks 
			for a paramaterizable class (an Algorithm is one of those) which 				holds a ParameterMap of all the inputs the
			algorithm needs and is thus added to the GUI automatically.
		</p>
		<p class="body_text"> <code>edu.iu.iv.gui.builder.SwtCompositeBuilder</code> - This class
			uses the Parameters just like the GUI Builder, but creates an SWT
			Component instead. This SWT Component can be imbedded in more 
			complex GUIs for whatever purpose. <b>NOTE:</b> You will have to 
			add the edu.iu.iv.swtguibuilder plugin to your list of dependencies if you
			wish to use this class.
		</p>
		<p class="body_text"> <a href="api/edu/iu/iv/common/parameter/ParameterMap.html" class="apiref"><code>edu.iu.iv.common.parameter.ParameterMap</code></a> - 				This class simply holds a mapping from a unique string to its 				associated Parameter. It also contains many helper methods for
			use in creating GUIs and getting parameter data back.
		</p> 
		<p class="body_text"> <a href="api/edu/iu/iv/common/parameter/Parameter.html" class="apiref"><code>edu.iu.iv.common.parameter.Parameter</code></a> - This class defines
			all the properties that are needed for defining what kind of input
			is needed from the user. Each Parameter property can be set 
			independently, but several convenience constructors are provided
			to simplify creating normal Parameters for the GUI Builder. 
			Important methods on the Parameter are the get/setEnabled(); methods
			and the get/setValue(); methods. these methods can be called from
			Validators and will immediately effect the display and enablement
			of the particular input that is changed. You can even change other
			Parameter's value and enablement and it will be updated in the GUI.
		</p>
		<p class="body_text"> <a href="api/edu/iu/iv/common/parameter/ParameterProperty.html" class="apiref"><code>edu.iu.iv.common.parameter.ParameterProperty</code></a> - This class
			defines Property's that are to be used when defining a Parameter.
			It is possible to use other Property's that are not defined here
			but they are not guaranteed to be acknowledged or used by the 
			GUI Builder. The javadoc explains what values are to be associated
			with each Property given. <b>NOTE:</b> if you simply use the 
			convenience constructors given by Parameter, you will normally not
			have to worry about these.
		</p>
		<p class="body_text"> <a href="api/edu/iu/iv/common/parameter/InputType.html" class="apiref"><code>edu.iu.iv.common.parameter.InputType</code></a> - This class defines
			what input types are available to the GUI. There are input types 
			for getting Integers, Booleans, Files, and more. The javadoc for
			these types says which ParameterProperties are needed and the 
			types accepted for values. You can use the convenience constructors
			on Parameter to fill in these values to (the javadoc says which
			parameter types correspond to each part of the constructor).
		</p>
		<p class="body_text"> <a href="api/edu/iu/iv/common/parameter/Validator.html" class="apiref"><code>edu.iu.iv.common.parameter.Validator</code></a> - This interface asks for
			method, isValid(Object value);, this method is used to check to see
			if the given value is valid and you can also update parameter 
			enablement and such. This method will be called every time anything
			is changed in the gui, so keep that in mind when doing things such
			as enabling and disabling parameters.
		</p>
		<p class="subsection_heading">Simple Code Example</p>
		<p class="body_text"> To demonstrate how this class can be used, a sample class with 
			annotations will be shown.
		</p>
<pre><code>public class SampleAlgorithm extends AbstractAlgorithm {    
	public SampleAlgorithm() {
		//this creates a string input type that asks for your name.
		//note that this does not have a validator so any String will be accepted
		parameterMap.put("name",new Parameter("Name","Enter your name", InputType.TEXT,"Bob"));
	    
		//this creates an integer input type that asks for a number greater than 0
		//this provides a validator which ensures the value is greater than zero.
		parameterMap.put("number",new Parameter("A Number","Enter a number, must be > 0", 
                InputType.INTEGER,new Integer(1), new Validator() {
                    public boolean isValid(Object value) {
                        
                        //you may also place parameter.setEnabled() and parameter.setValue()
                        //code here and it will be updated by the gui. remember this
                        //validator method is called every time ANYTHING changes in the gui.
                        
                        return value != null &amp;&amp; ((Integer) value).intValue() > 0;
                    }}));
	}
	
	public boolean execute(){
		//from the execute method you can assume that the parameter
		//values have been filled by the GUI. 
		String name = (String) parameterMap.get("name").getValue();
		Integer number = (Integer) parameterMap.get("number").getValue();
	}
	
	//a method that creates a gui to get input and runs the algorithm afterwards
	public void getInputAndRun() {
		final GUIBuilder gui = GUIBuilder.createGUI("title","message", SampleAlgorithm.this);
        
		gui.addSelectionListener(new SelectionListener() {
			public void widgetSelected(SelectionEvent e) {
				IVC.getInstance().getScheduler().schedule(SampleAlgorithm.this);
                
				gui.close();
			}
			public void widgetDefaultSelected(SelectionEvent e) {
				widgetSelected(e);
			}});
			
		gui.open();
	}
}
</code></pre>

	<p class="backtotoc"><a href="main.html#TOC">[Back To TOC]</a></p>
	</body>
</html>
