<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Library Plug-in Tutorial - IVC Developer Guide</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" 
			/>
		<link href="ivcdocstyle.css" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<p class="backtotoc">
			<a href="main.html#TOC" class="backtotoc">[Back To TOC]</a>
		</p>
		<p>
			<span class="section_heading">Library Plug-in Tutorial</span>
			<br />
			<span class="metainfo">Author: <a href="mailto:jasellis@NOSPAM.cs.indiana.edu">James Ellis</a><br /> Last Modified: 
				April 20, 2005 </span>
		</p>
		<p class="subsection_heading">Summary</p>
		<p class="body_text">
			A plug-in that simply provides a library for usage by other plug-ins
			is perhaps the simplest plug-in to create.  This tutorial will show
			the developer how to structure the <code>plugin.xml</code> file and
			include the library files correctly to allow other plug-ins to list
			a library plug-in as a dependency and make calls into its API.
		</p>
		<p class="subsection_heading">Pre-requisites</p>
		<p class="body_text"> Before you read this document, it is useful to 
			have some working knowlege of <a 
			href="http://www.eclipse.org">Eclipse</a> and the Eclipse plug-in 
			framework. We will be discussing the creation of a standard Eclipse
			plug-in and adding library files to it in particular, 
			but no prior knowledge of this topic is assumed. </p>
		<p class="section_heading">
			<span class="subsection_heading">Section Table of Contents</span>
			<a name="section_toc" id="section_toc"></a>
		</p>
		<ol>
			<li class="body_text">
				<a href="#library">Creating a Library Plug-in</a>				
			</li>
			<li class="body_text">
				<a href="#further_reading">Further Reading</a>
			</li>
		</ol>						
				
		<hr align="center" width="50%" />
		<a name="library" id="library"/>
		<p class="backtotoc">
			<a href="#section_toc">[Back to Section TOC]</a>
		</p>		
		<p class="subsection_heading">Creating a Library Plug-in</p>
		<p class="body_text">
			Creating a library plug-in is essentially a two-step process.
			First we will create an empty plug-in project.  This project will
			really have nothing to it to speak of but a <code>plugin.xml</code> file.
			Next, we add whatever library .jar files we wish to have included
			to the plug-ins folder, and then specify to include them on
			the runtime classpath of the plug-in.  There really is no IVC template
			for a library plug-in as there is nothing to specify in the plug-in
			creation phase.
		</p>
		<p class="body_text">
			To create an empty plug-in project, go to <strong>File->New->Project...</strong>
			and select <strong>Plug-in Project</strong> from the <em>
			Plug-in Development</em> section.  Give the project a name, and 
			deselect the checkbox in the section labeled <strong>Project Settings</strong>
			that says <em>Create a Java project</em>.  A library plug-in includes
			no Java source files, so this is not needed.
		</p>
		<div align="center">
				<img src="images/library/1.png" alt="creating an empty plug-in" class="figure" />
			<div class="figurecaption">
				<p>Fig1: The plug-in project dialog should look like this.</p>
			</div>
		</div>
		<p class="body_text">
			Press <strong>Next ></strong> and fill out the plug-in information
			on the next page of the dialog.  After this information has been
			filled out, the empty plug-in project creation is compete.  Press
			<strong>Finish</strong> and the plug-in project will be generated.
		</p>
		<div align="center">
				<img src="images/library/2.png" alt="specifying plug-in information" class="figure" />
			<div class="figurecaption">
				<p>Fig2: Enter in the desired information and press
					<strong>Finish</strong> to create the empty plug-in project.</p>
			</div>
		</div>		
		<p class="body_text">
			Now, whatever .jar files we want included need to be added into the
			project's directory.  One simple way to do this is to use Eclipse's
			import functionality.  Right-click on the project that was created
			and choose <strong>Import ...</strong> and then select <strong>
			File System</strong> as the source, presuming the .jar file exists 
			somewhere on the local file system. Select <strong>Browse...</strong>
			on the next dialog to find the directory of a .jar file that is desired
			and then select the .jar file itself from the listbox on the right and
			press <strong>Finish</strong> to import the file.  In our example, we will
			add the file <code>abc.jar</code>.
		</p>
		<div align="center">
			<a href="images/library/3.png">
				<img src="images/library/3.png" alt="importing a jar" class="figure" />
			</a>
			<div class="figurecaption">
				<p>Fig3: The import dialog should look something like this once you
					have browsed for the directory that contains the desired .jar file.
					Select the .jar file and press <strong>Finish</strong> to import it.
					(Click to Expand)</p>
			</div>
		</div>
		<p class="body_text">
			Now that the jar file(s) are in the plug-ins directory.  We can open the
			<code>plugin.xml</code> file and specify the runtime classpath entries.
			Navigate to the <strong>Runtime</strong> tab of the <code>plugin.xml</code>
			editor.  In the <em>Run-time Libraries</em> section, press <strong>
			Add...</strong> and a list should come up that includes all of the jar
			files that were imported.  Make your selection and press <strong>OK</strong>.
		</p>
		<div align="center">
			<a href="images/library/4.png">
				<img src="images/library/4.png" alt="adding to the runtime classpath" class="figure" />
			</a>
			<div class="figurecaption">
				<p>Fig4: The <code>plugin.xml</code> editor's <strong>Runtime</strong> tab
					contains entries for all .jar files to be included in the
					<em>Run-time libraries</em> section. (Click to Expand)</p>
			</div>
		</div>
		<p class="body_text">
			There is one final step to ensure that everything is accounted for when
			the actual plug-in is built and exported.  We have to make sure that
			all included .jar files are on the build path.  To do so, go to the
			<strong>Build</strong> tab of the <code>plugin.xml</code> editor. In the
			<em>Binary Build</em> and <em>Source Build</em> sections, make sure that
			there are checkmarks next to the .jar files that were added.
		</p>
		<div align="center">
			<a href="images/library/5.png">
				<img src="images/library/5.png" alt="adding jars to the build path" class="figure" />
			</a>
			<div class="figurecaption">
				<p>Fig5: The <strong>Build</strong> tab of the <code>plugin.xml</code>
					editor should specify that the added jars are on the build
					paths for the binary and source builds of the plug-in. 
					(Click to Expand)</p>
			</div>
		</div>		
		<p class="body_text">
			That's it, the library plug-in is now ready to be used and listed as 
			a dependency by other plug-ins that wish to make calls into its API.
			This method is the preferred method to include libraries for a plug-in, since
			it allows multiple plug-ins to share the same library by simply listing
			it as a dependency.  If multiple plug-ins were to instead include duplicate
			.jar files in each, this would result in unneccesary file duplication
			and increased download times.
		</p>

		<hr align="center" width="50%" />
		<a name="further_reading" id="further_reading"/>
		<p class="backtotoc">
			<a href="#section_toc">[Back to Section TOC]</a>
		</p>				
		<p class="subsection_heading">Further Reading</p>
		<p class="body_text">
			<a href="http://www.eclipse.org/articles/Article-PDE-does-plugins/PDE-intro.html">
			PDE Does Plug-ins</a>
		</p>
	
		<p class="backtotoc"><a href="#section_toc">[Back to Section TOC]</a> | 
			<a href="main.html#TOC">[Back To TOC]</a></p>
	</body>
</html>