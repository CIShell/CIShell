<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>IVC Core - IVC Developer Guide</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" 
			/>
		<link href="ivcdocstyle.css" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<p class="backtotoc">
			<a href="main.html#TOC" class="backtotoc">[Back To TOC]</a>
		</p>
		<p>
			<span class="section_heading">IVC Core - Rich Client Platform 
				Implementation</span>
			<br />
			<span class="metainfo">Author: <a href="mailto:jasellis@NOSPAM.cs.indiana.edu">James Ellis</a><br /> Last Modified: 
				April 18, 2005 </span>
		</p>
		<p class="subsection_heading">Summary</p>
		<p class="body_text">The Information Visualization Cyberinfrastructure 
			(IVC) implementation using the Eclipse Rich Client Platform (RCP) 
			utilizes the strong core framework of Eclipse by building a custom 
			application layer on top of it. The basic idea is to use a subset 
			of foundation plug-ins that exist in the Eclipse runtime core to 
			handle the launching and plug-in registration for IVC, and provide 
			a framework to build the application on that leverages much of the 
			work already done by Eclipse that we can use.</p>
		<p class="subsection_heading">Pre-requisites</p>
		<p class="body_text">Before you read this document, it is useful to 
			have some working knowlege of <a 
			href="http://www.eclipse.org">Eclipse</a> and the Eclipse plug-in 
			framework. Also, prior knowledge of the Rich Client Platform (RCP), 
			discussed in the <a 
			href="http://www.eclipse.org/articles/index.html"> articles 
			section</a> of the Eclipse site, is useful but should not be 
			considered required.</p>
		<p class="section_heading">
			<span class="subsection_heading">Section Table of Contents</span>
			<a name="section_toc" id="section_toc"></a>
		</p>
		<ol>
			<li class="body_text">
				<a href="#core_feature">The Core Feature</a>
			</li>
			<li class="body_text">
				<a href="#flow">Flow of Control</a>
			</li>
			<li class="body_text">
				<a href="#rcp">RCP Implementation</a>
			</li>
			<li class="body_text">
				<a href="#rcpterms">RCP Terminology</a>
			</li>			
			<li class="body_text">
				<a href="#further_reading">Further Reading</a>
			</li>
		</ol>
		<hr align="center" width="50%"/>
		<a name="core_feature" id="core_feature"/>
		<p class="backtotoc">
			<a href="#section_toc">[Back to Section TOC]</a>
		</p>
		<p class="subsection_heading">The Core Feature</p>
		<p class="body_text">The 
			<a href="glossary.html#coreplugin" class="glossary_term">IVC Core Plug-in</a> 
			is built on top of the 
			foundation Eclipse plug-ins and provides all of the necessary 
			functionality that the 
			<a href="glossary.html#ivc" class="glossary_term">IVC</a>
			and future plug-ins will require. 
			Included in this are things like the
			<a href="glossary.html#datamodel" class="glossary_term">Plugin</a>, 
			<a href="glossary.html#algorithm" class="glossary_term">Algorithm</a>, 
			<a href="glossary.html#datamodel" class="glossary_term">DataModel</a>, and 
			<a href="glossary.html#persister" class="glossary_term">Persister</a>
			interfaces which define the contract for future 
			extensions of the core. The core plug-in handles all of the 
			bookkeeping work that is required to keep everything running 
			together smoothly in the plug-in environment (except the actual 
			plug-in registration of course, which is handled by the Eclipse 
			core). It keeps track of the data models that have been loaded or 
			generated in a 
			<a href="glossary.html#modelmanager" class="glossary_term"><code>ModelManager</code></a>.
			It maintains a 
			<a href="glossary.html#scheduler" class="glossary_term"><code>Scheduler</code></a>
			to allow for algorithms to be queued up, 
			scheduled for specific times, and ran in an organized fashion. It 
			defines various 
			<a href="glossary.html#property" class="glossary_term"><code>Property</code></a>
			classes that should be
			defined for Plugins, Persisters, Algorithms, and DataModels. The 
			core handles the 
			<a href="glossary.html#logging" class="glossary_term">logging</a>
			of information to user and error logs, and 
			defines the interfaces to message handling and 
			<a href="glossary.html#console" class="glossary_term">console</a>
			logging to 
			interface between IVC and the user, with the flexibility of using 
			any 
			<a href="glossary.html#messaging" class="glossary_term">messaging</a>
			implementation, whether it be GUI based or 
			otherwise.</p>
		<p class="body_text">Almost any extension to IVC will have the core 
			plug-in as a dependency, utilizing the various things defined in 
			the core to accomplish its work. The single biggest point of 
			control is the <code>IVC.java</code> class, which provides 
			an interface to much of the functionality mentioned above, and acts 
			as the mediator between plug-in extensions to IVC and the internal 
			workings of the core.</p>
		<p class="body_text">The core plug-in is as minimalist as possible by 
			design, trying to allow for delegation of duties to other plug-ins 
			wherever possible to have the most flexible design for future 
			change. The core plug-in is thus only one piece in what is 
			considered the 
			<a href="glossary.html#corefeature" class="glossary_term">Core Feature</a>. 
			While the core plug-in itself 
			is the centerpiece of the running application, and provides the 
			extensibility for new plug-ins, the other pieces of the core 
			feature are what comprises most of the application you see, from 
			the GUI components, to the basic menu layout and interaction with 
			the user. The core feature consists of the following seven 
			plug-ins:</p>
		<ul>
			<li class="body_text"><code>edu.iu.iv.core</code> - the "core" 
				plug-in</li>
			<li class="body_text"><code>edu.iu.iv.gui</code> - the graphical 
				user interface extension of the core, provides the basic 
				framework for the IVC GUI application</li>
			<li class="body_text"><code>edu.iu.iv.consoleview</code> - 
				contributes the console view to the GUI window</li>
			<li class="body_text"><code>edu.iu.iv.datamodelview</code> - 
				contributes the data models view to the GUI window</li>
			<li class="body_text"><code>edu.iu.iv.schedulerview</code> - 
				contributes the scheduler view to the GUI window</li>
			<li class="body_text"><code>edu.iu.iv.guimessagehandler</code> - 
				plugs into the core to provide a message handler implementation 
				that is GUI based, with dialog boxes</li>
			<li class="body_text"><code>edu.iu.iv.persistence</code> - 
				interfaces with persistence, contributing the load 
				and save menu items.
		</ul>
		<p> The figure below shows how the core feature plug-ins relate to the 
			overall view of the IVC application. The shaded items are the 
			Eclipse core plug-ins, and the core feature plug-ins are built 
			around this Eclipse core. At the base is the core plug-in which the 
			GUI plug-in is built on. The GUI plug-in is used by various GUI 
			components to build the graphical IVC application. Most general 
			IVC plug-ins, shown at the bottom, will be extensions of the core 
			plug-in, using its interfaces into the IVC runtime. </p>
		<div align="center">
			<a href="images/corefeature.png">
				<img src="images/corefeature.png" alt="core feature diagram" 
					name="CoreFeatureImage" width="400" class="figure" 
					id="CoreFeatureImage" />
			</a>
			<div class="figurecaption">
				<p>Fig1: Relationship between Eclipse core plug-ins, IVC core 
					plug-in, and the rest of the plug-ins in the IVC core 
					feature. (click to expand)</p>
			</div>
		</div>
		<hr align="center" width="50%" />
		<a name="flow" id="flow"/>
		<p class="backtotoc">
			<a href="#section_toc">[Back to Section TOC]</a>
		</p>
		<p class="subsection_heading">Flow of Control</p>
		<p class="body_text"> It is beneficial to discuss how the IVC 
			application's flow of control works through the runtime of the 
			application. With just a core feature as described above, and no 
			additional plug-ins, the IVC is very limited, of course. Once 
			plug-ins are added for preprocessing, modeling, analysis, 
			visualization, and interaction, the system begins to come to life. 
			Each plug-in will typically contribute one (or more) menu items to 
			the main menu of IVC. These new menu items will be enabled or 
			disabled based on the currently selected data model in IVC. </p>
		<p class="body_text"> Initially, no model is selected, but new data 
			models can be generated by plug-ins, or loaded from file (or 
			elsewhere perhaps) using <code>Persisters</code>, which we will 
			discuss later. If the user selects the menu item for a plug-in, the 
			functionality defined in <code>AbstractPlugin.java</code> (in 
			<code>edu.iu.iv.core</code>) will cause that plug-in to send a 
			request into the core plug-in to ask to be launched by IVC. IVC 
			will then gather information about the currently selected data 
			model(s) and respond to the request by calling the plug-in's 
			<code>launch(DataModel)</code> method. At this point, the plug-in 
			is free to invoke any sort of algorithm (or schedule it in IVC), 
			visualization, or other activity it wishes. </p>
		<p class="body_text"> With <code>Persisters</code>, the plug-in is 
			assumed to contain one or more implementations of the 
			<code>Persister</code> interface that should be registered with the 
			IVC <code>PersisterRegistry</code> to be used when the user 
			attempts to load or save files. Upon initial load, persister plug-ins simply query IVC for 
			the runtime path to themselves in the filesystem, and then make a 
			call into the core persistence plug-in asking for it to scan their 
			location and load any implementers of <code>Persister</code> that 
			it finds (using reflection). The persistence plug-in handles the 
			rest of the work, and any Persisters that were found are added to 
			IVC's <code>PersisterRegistry</code> and will be available to the 
			user when they invoke a load or save operation though the file menu 
			or elsewhere in the GUI components. </p>
		<hr align="center" width="50%" />
		<a name="rcp" id="rcp"/>
		<p class="backtotoc">
			<a href="#section_toc">[Back to Section TOC]</a>
		</p>
		<p class="subsection_heading">RCP Implementation</p>
		<p class="body_text"> The details of the Rich Client Platform (RCP) 
			implementation that provides the GUI application for IVC can be 
			found by examining the <code>edu.iu.iv.gui</code> plug-in. The 
			foundation of the entire application can be found in the 
			<code>IVCApplication</code> class. This is the class that is 
			actually invoked by the Eclipse runtime and is responsible for the 
			creation of the main application window. Much of this work is 
			delegated to the <code>IVCWorkbenchAdvisor</code> class. This class 
			is what is actually doing the work of initializing the menu 
			structure, and various other configuration of the application 
			during launch. </p>
		<p class="body_text"> The <code>plugin.xml</code> file in the 
			<code>edu.iu.iv.gui</code> plug-in contains several Eclipse 
			extensions. These are places where the IVCApplication is 
			interfacing to the underlying Eclipse core to setup the custom 
			components of IVC. IVC defines an Eclipse perspective, which is 
			used by all views that are contributed to the application. IVC has 
			taken the single perspective approach (rather than having mulitple 
			perspectives) to keep the interface simple at this point. Various 
			other properties are also defined in the <code>plugin.java</code>, 
			such as the extension of 
			<code>org.eclipse.core.runtime.applications</code> which defines 
			that <code>IVCApplication</code> is indeed the primary entry point 
			to the application as discussed above. Also an extension of 
			<code>org.eclipse.core.runtime.products</code> allows IVC to brand 
			itself as an Eclipse "product" and thus take advantage of some more 
			built in features by specifying some information about the product. 
			Finally, the <code>plugin.xml</code> file defines some extensions 
			of <code>edu.iu.iv.preferences.SchedulingPreferences</code>, which 
			utilize the Eclipse preferences framework to create a dialog to 
			allow the user to manipulate various preferences defined in the 
			core plug-in. </p>
		<p class="body_text"> The <code>edu.iu.iv.gui</code> plug-in thus 
			contains within it the classes needed to support these defined 
			extensions, as well as other utilities used by the GUI 
			implementation, such as the GUIBuilder. The GUIBuilder is discussed 
			more in detail in discussions about algorithm plug-in 
			implementation, but essentially it provides a means for plug-in 
			developers to automate the process of building a GUI dialog that is 
			needed to gather information from the user, such as parameters for 
			an algorithm. </p>
		<p class="body_text"> The rest of the RCP implemenation is spread 
			around the other plug-ins in the core feature. For example, the 
			<code>edu.iu.iv.consoleview</code>, 
			<code>edu.iu.iv.datamodelview</code>, and 
			<code>edu.iu.iv.schedulerview</code> plug-ins each contribute an 
			extension to the <code>org.eclipse.ui.views</code> Eclipse 
			extension point, to add a new View to the IVC application window. 
			These plug-ins also contribute 
			<code>org.eclipse.ui.perspectiveExtensions</code>, which allow it 
			do define some attributes about which perspective the view should 
			be added to (<code>edu.iu.iv.gui.IVCPerspective</code>), and how it 
			should appear by default. The core persistence plug-in contributes 
			an <code>org.eclipse.ui.actionSets</code> extension, which defines 
			some new menu items in IVC for the load and save functionality it 
			provides. Several of these plug-ins also utilize the 
			<code>org.eclipse.ui.startup</code> extension which allow them to 
			be "force-loaded" upon launch of the application to do some 
			initialization work that is needed, rather that waiting for the 
			standard "lazy-load" approach that Eclipse defaults to where the 
			plug-in does not get loaded until the user performs some behavior 
			that requires it. </p>

		<hr align="center" width="50%" />
		<a name="rcpterms" id="rcpterms"/>
		<p class="backtotoc">
			<a href="#section_toc">[Back to Section TOC]</a>
		</p>
		<p class="subsection_heading">RCP Implementation Terminology</p>
		<ul>
			<li class="body_text"><strong><a 
				href="http://help.eclipse.org/help30/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_basicext_actionSets.htm"> 
				ActionSet</a></strong> - <code>org.eclipse.ui.actionSets</code> 
				extension point allows you to contribute menu items to the user 
				interface, with implemenations of 
				<code>IWorkbenchWindowActionDelegate</code></li>
			<li class="body_text"><strong>Application</strong> - a class that implements 
				<code>org.eclipse.core.runtime.IPlatformRunnable</code> which 
				can be launched by the eclipse launcher to load your RCP 
				project</li>
			<li class="body_text"><strong>Extension</strong> - Eclipse provides certain extension 
				points that you can use to plug into the user interface 
				elements of the application and perform other tasks - 
				extensions defined in <code>plugin.xml</code> files describe 
				what exactly your plug-in is contributing to the 
				application</li>
			<li class="body_text"><strong>Lazy Load</strong> - plug-in code is not loaded and ran 
				until the user invokes some operation that requires it, Eclipse 
				plug-ins default to this behavior, getting all initialization 
				information from the <code>plugin.xml</code> file. In IVC, the 
				<code>org.eclipse.ui.startup</code> extension point is used to 
				override this behavior and allow for initialization code to be 
				ran automatically on program launch (inside a class 
				implementing <code>IStartup</code>)</li>
			<li class="body_text"><strong><a 
				href="http://www.eclipse.org/articles/using-perspectives/PerspectiveArticle.html"> 
				Perspective</a></strong> - defines a master "view container" 
				for a specific purpose. IVC uses just one perspective 
				<code>edu.iu.iv.gui.IVCPerspective</code></li>
			<li class="body_text"><strong><a 
				href="http://www.eclipse.org/articles/Article-Preferences/preferences.htm"> 
				Preference</a></strong> - 
				<code>org.eclipse.ui.preferencePages</code> extension point 
				allows plug-ins to contribute to the Eclipse preference 
				framework</li>
			<li class="body_text"><strong><a 
				href="http://www.eclipse.org/articles/Article-Branding/branding-your-application.html"> 
				Product</a></strong> - a product adds "branding" information to 
				an application like a window image, about text, etc. to 
				customize the application</li>
			<li class="body_text"><strong><a 
				href="http://www.eclipse.org/articles/Article-RCP-1/tutorial1.html"> 
				RCP</a></strong> - Rich Client Platform, allows for using the 
				Eclipse Framework in any custom application, leveraging from 
				the many tools and existing code already available in the 
				Eclipse platform</li>
			<li class="body_text"><strong><a 
				href="http://www.eclipse.org/articles/viewArticle/ViewArticle2.html"> 
				View</a></strong> - elements within a perspective in the 
				workbench, a perspective can have several views, with 
				customizable layout on the workbench</li>
			<li class="body_text"><strong>Workbench</strong> - the main window of the 
				application, where the perspective and all the views inside it 
				reside</li>
			<li class="body_text"><strong><a 
				href="http://www.eclipse.org/articles/Article-SWT-Design-1/SWT-Design-1.html"> 
				SWT</a></strong> - Standard Widget Toolkit, graphical user 
				interface toolkit that uses native widgets to the operating 
				system in a platform dependent fashion, with a platform 
				independent API in Java developed by Eclipse </li>
		</ul>
		
		<hr align="center" width="50%" />
		<a name="further_reading" id="further_reading"/>
		<p class="backtotoc">
			<a href="#section_toc">[Back to Section TOC]</a>
		</p>
		<p class="subsection_heading">Further Reading</p>
		<p class="body_text"> This is a growing list of places to go to learn 
			new things about developing plug-ins for the Eclipse RPC 
			framework.</p>
		<p class="body_text">Eclipse technical articles:</p>
		<ul>
			<li class="body_text">
				<a 
					href="http://www.eclipse.org/articles/Article-PDE-does-plugins/PDE-intro.html">
					 PDE Does Plug-ins</a>
			</li>
			<li class="body_text">
				<a 
					href="http://www.eclipse.org/articles/Article-RCP-1/tutorial1.html">
					 Rich Client Tutorial Part 1</a>
			</li>
			<li class="body_text">
				<a 
					href="http://www.eclipse.org/articles/Article-RCP-2/tutorial2.html">
					 Rich Client Tutorial Part 2</a>
			</li>
			<li class="body_text">
				<a 
					href="http://www.eclipse.org/articles/Article-RCP-3/tutorial3.html">
					 Rich Client Tutorial Part 3</a>
			</li>
			<li class="body_text">
				<a 
					href="http://www.eclipse.org/articles/using-perspectives/PerspectiveArticle.html">
					 Using Perspectives in the Eclipse UI</a>
			</li>
			<li class="body_text">
				<a 
					href="http://www.eclipse.org/articles/viewArticle/ViewArticle2.html">
					 Creating an Eclipse View</a>
			</li>
			<li class="body_text">
				<a 
					href="http://www.eclipse.org/articles/Article-Branding/branding-your-application.html">
					 Branding Your Application</a>
			</li>
			<li class="body_text">
				<a 
					href="http://www.eclipse.org/articles/Article-Preferences/preferences.htm">
					 Preferences and Properties in the Eclipse Workbench UI</a>
			</li>
			<li class="body_text">
				<a 
					href="http://www.eclipse.org/documentation/html/plugins/org.eclipse.platform.doc.isv/topics_Guide.html">
					 Eclipse Platform Programmer's Guide</a>
			</li>
		</ul>
		<p class="body_text">SWT References:</p>
		<ul>
			<li class="body_text">
				<a href="http://www.cs.umanitoba.ca/~eclipse/2-Basic.pdf">Basic 
					SWT Widgets</a>
			</li>
			<li class="body_text">
				<a href="http://www.cs.umanitoba.ca/~eclipse/3-Advanced.pdf"> 
					Advanced SWT Widgets</a>
			</li>
			<li class="body_text"> <a 
				href="http://www.javaworld.com/javaworld/jw-04-2004/jw-0426-swtjface.html"> 
				Rich Clients with the SWT and JFace</a> (Java World)</li>
			<li class="body_text">
				<a 
					href="http://www.eclipse.org/articles/StyledText%201/article1.html">
					 Getting Your Feet Wet with the SWT StyledTextWidget</a>
			</li>
			<li class="body_text">
				<a 
					href="http://www.eclipse.org/articles/Understanding%20Layouts/Understanding%20Layouts.htm">
					 Understanding Layouts in SWT</a>
			</li>
		</ul>
		<p class="backtotoc"><a href="#section_toc">[Back to Section TOC]</a> | 
			<a href="main.html#TOC">[Back To TOC]</a></p>
	</body>
</html>
