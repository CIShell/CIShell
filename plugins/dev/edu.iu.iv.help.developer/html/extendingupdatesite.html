<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">	<head>		<title>Extending the IVC Update Site - IVC Developer Guide</title>		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" 			/>		<link href="ivcdocstyle.css" rel="stylesheet" type="text/css" />	</head>	<body>		<p class="backtotoc">			<a href="main.html#TOC" class="backtotoc">[Back To TOC]</a>		</p>		<p>			<span class="section_heading">Extending the IVC Update Site</span>			<br />			<span class="metainfo">Author: <a href="mailto:jasellis@NOSPAM.cs.indiana.edu">James Ellis</a><br /> Last Modified: 				April 19, 2005 </span>		</p>		<p class="subsection_heading">Summary</p>		<p class="body_text">			The preferred means of distribution of 			<a href="glossary.html#ivc" class="glossary_term">IVC</a> plug-ins is through an			Update Site, using the <a href="glossary.html#softwareupdate" class="glossary_term">				Software Update Tool</a>.  IVC developers with			access to the IVC Sourceforge site can add new 				<a href="glossary.html#feature" class="glossary_term">features</a> to the existing			<a href="glossary.html#updatesite" class="glossary_term">Update Site</a> located there.  This document will describe how to create			an Eclipse Feature project for a new plug-in(s) and how to add this			new Feature to the existing Update Site.		</p>		<p class="subsection_heading">Pre-requisites</p>		<p class="body_text">			Before you read this document, it is useful to 			have some working knowlege of <a 			href="http://www.eclipse.org">Eclipse</a> and the Eclipse plug-in 			framework.  We will be discussing the creation of Eclipse Feature projects			and Update Site projects in particular, but no prior knowledge of these			topics is assumed.  Also, to add to the IVC Update Site you must have			access to the IVC Sourceforge webspace.  Other developers that want to			create plug-ins for IVC should consider creating their own Update Site			and hosting their new features there.  This topic is discussed in			<a href="creatingnewupdatesite.html">Creating an IVC Update Site</a>.		</p>		<p class="section_heading">			<span class="subsection_heading">Section Table of Contents</span>			<a name="section_toc" id="section_toc"></a>		</p>		<ol>			<li class="body_text">				<a href="#newfeature">Extending the IVC Update Site - Creating new Features</a>							</li>			<li class="body_text">				<a href="#further_reading">Further Reading</a>			</li>		</ol>						<hr align="center" width="50%" />		<a name="newfeature" id="newfeature"/>		<p class="backtotoc">			<a href="#section_toc">[Back to Section TOC]</a>		</p>				<p class="subsection_heading">Extending the IVC Update Site - Creating new Features</p>		<p class="body_text">			To add an existing plug-in or set of plug-ins to the update site, a Feature			project must first be made that contains the collection and specifies any			additional dependencies. To create a new Feature project in Eclipse, select			<strong>File->New->Project...</strong>.  Then, in the category labeled			<em>Plug-in Development</em>, select <strong>Feature Project</strong>.		</p>		<div align="center">			<img src="images/update/5.png" alt="new feature project" class="figure" />			<div class="figurecaption">				<p>Fig1: Select Feature Project under Plug-in Development in the New					Project menu.</p>			</div>		</div>			<p class="body_text">			Give the new project a name based upon the plug-in(s) it is using. Then			fill out the dialog asking for information about feature ID (usually the same			as the plug-in ID for single plug-in features), name, version, and provider.			After this dialog is filled out, you can either press <strong>Finish</strong>			to generate the <code>feature.xml</code> at this point, or press <strong>Next ></strong>			to select from a list the plug-ins that you wish to include in this feature.			Waiting to select the plug-ins after the <code>feature.xml</code> is generated			is perfectly fine as we will describe this process in the paragraph's below.		</p>		<div align="center">			<img src="images/update/6.png" alt="feature properties" class="figure" />			<div class="figurecaption">				<p>Fig2: An example of a new feature dialog filled out for a feature					based on a "PluginZ" plug-in.</p>			</div>		</div>					<p class="body_text">			When <strong>Finish</strong> is pressed, the feature project will be generated			in the Eclipse workspace and a <code>feature.xml</code> file will be created.  This is where			we define what plug-ins are included, and other information about the feature.			Open this <code>feature.xml</code> file and go to the <strong>content</strong> tab at the bottom			of the editor.  This is where we can add plug-ins to the feature.  Plug-ins we wish			to add must exist in the workspace in Eclipse already, and pressing <strong>Add...			</strong> will allow you to browse and find the desired plug-ins.  The			"Overview" and "Information" tabs of the <code>feature.xml</code> allow for input			of various information that will be available to the user through the update			tool when they press the <strong>Properties</strong> button while looking at the			plug-in.		</p>		<div align="center">			<a href="images/update/7.png">				<img src="images/update/7.png" alt="adding plug-ins to the feature" class="figure" />			</a>			<div class="figurecaption">				<p>Fig3: After pressing <strong>Add...</strong> and selecting our plug-in					(<code>edu.iu.iv.pluginz</code>), the feature shows the added plug-in on the left, 					and the dependencies of the feature that were derived from that plug-in					on the right. (Click to Expand)</p>			</div>		</div>				<p class="body_text">			One last (optional) step, is to implant the Update Site URL into the feature,			to automate the process of updating the feature, when a new version becomes			available.  If we include this URL, users can simply allow the update tool			to search for updates automatically rather than having to manually revisit			the update site they got it from.  This does not have to be included, but will			prevent the automatic updating of the feature if not.  It is important though			that the site URL is chosen carefully, because once the feature has shipped, it			will be expecting the URL to be where you said it would be.		</p>		<p class="body_text">			On the Overview tab of the <code>feature.xml</code> locate the Feature 			URLs section. Choose <strong>New->Update URL</strong> from the pop-up menu 			and edit the object properties in the property sheet below the editor			when it is created.  The URL should match the update site URL, for example:			<code>http://ivc.sourceforge.net/update/</code> for the IVC update site.		</p>		<div align="center">			<a href="images/update/12.png">				<img src="images/update/12.png" alt="setting the update URL" class="figure" />			</a>			<div class="figurecaption">				<p>Fig4: An example of what the Overview tab of the <code>feature.xml</code> 					file should look like after setting the update URL to the IVC					Update Site.  Notice the Properties section below which contains					the URL and Label. (Click to Expand)</p>			</div>		</div>					<p class="body_text">			Once all plug-ins have been added to the feature, be sure to save the feature.xml			file.  We are now ready to add this new feature to the update site project			(check out most current from cvs).  To do so, open the <code>site.xml</code> file			in the update site project.  On the "Features" tab, This file will list a bunch 			of features on the left that exist on the site.  On the right side the categories			on the site are defined and the features are divided among those categories. To add			a new feature, select <strong>Add...</strong> and find the feature we just created.			It will be added to the list on the left when you press <strong>Finish</strong>.					</p>			<p class="body_text">			Now, since we are doing a plug-in feature, we will add it to the "IVC Plug-ins"			category. To do so, simply click the feature that was added and drag it on top			of this category on the right, like you were moving a file in a windowing system.			This will add it to the desired category and update the <code>site.xml</code> file			to reflect this.		</p>		<div align="center">			<a href="images/update/8.png">				<img src="images/update/8.png" alt="adding the feature to the update site" class="figure" />			</a>			<div class="figurecaption">				<p>Fig5: The <code>site.xml</code> file's "Feature" tab shows the newly added plug-in					(<code>edu.iu.iv.pluginz</code>) in the list on the left, and in the category					of "IVC Plug-ins" on the right. (Click to Expand)</p>			</div>		</div>				<p class="body_text">			Finally, right-click on the newly added feature in the list on the left and select			<strong>Build</strong>.  This will cause Eclipse to build the .jar files for the feature			and whatever plug-ins are included in the feature.  These files will be placed in			the "features" and "plugins" subdirectories respectively, inside the update site			project.  These new files now need to be transfered to the IVC update site on			<code>sourceforge.net</code>.		</p>		<p class="body_text">			Developers with access to the IVC Sourceforge site can add new features			to the update site existing at the URL mentioned above (<code>http://ivc.sourceforge.net/update</code>).			To transfer the files that are created as discussed below, open an sftp			connection to ivc.sourceforge.net and navigate to the 			<code>/home/groups/i/iv/ivc/htdocs/update</code>			directory. This directory contains the <code>site.xml</code> file that should be updated			with any changes (the most current version exists in cvs).  Also in the directory			are subdirectories labeled "plugins" and "features".  These directories correspond			to those that exist in the update site project in cvs, and additions to the update site			will result in new .jar files being added to these directories when the new feature			is built.  Move the new .jar files from the "plugins" and "features" directories			into the corresponding folders on the update site and then move the updated			<code>site.xml</code> file.  The update site has now been updated to include a new			feature, which will be available through IVC by running the update tool as mentioned			in the previous section.		</p>		<div align="center">			<img src="images/update/9.png" alt="sftp connection to the update site" class="figure" />			<div class="figurecaption">				<p>Fig6: After establishing an SFTP connection to the update site, move the new					.jar files from the "plugins" and "features" directory that were built, as 					well as the updated <code>site.xml</code> file.</p>			</div>		</div>					<hr align="center" width="50%" />		<a name="further_reading" id="further_reading"/>		<p class="backtotoc">			<a href="#section_toc">[Back to Section TOC]</a>		</p>						<p class="subsection_heading">Further Reading</p>		<p class="body_text">			<a href="http://www.eclipse.org/articles/Article-Update/keeping-up-to-date.html">				How to Keep Up to Date</a> (eclipse.org)		</p>			<p class="backtotoc"><a href="#section_toc">[Back to Section TOC]</a> | 			<a href="main.html#TOC">[Back To TOC]</a></p></body></html>